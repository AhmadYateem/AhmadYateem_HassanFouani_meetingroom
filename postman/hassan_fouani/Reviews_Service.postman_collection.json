{
  "info": {
    "name": "Hassan Fouani - Reviews Service",
    "_postman_id": "hassan-reviews-service",
    "description": "Complete Reviews Service API collection by Hassan Fouani. Includes review management, moderation, flagging, and error cases.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "0. Health & Analytics",
      "item": [
        {
          "name": "0.1 Reviews Service Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5004/health",
              "host": ["http://localhost:5004"],
              "path": ["health"]
            },
            "description": "**INPUT**: None (no authentication required)\n**PROCESS**: GET request to health endpoint\n**OUTPUT**: 200 OK with service status\n\n**Screenshot Caption**: Figure 45: Reviews Service Health Check - GET request showing service is healthy (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "0.2 Get User's Reviews",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/user/{{user_id}}",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "user", "{{user_id}}"]
            },
            "description": "**INPUT**: User ID in URL path + JWT token\n**PROCESS**: GET request retrieves all reviews by user\n**OUTPUT**: 200 OK with list of user's reviews\n\n**Screenshot Caption**: Figure 46: User's Reviews API - Retrieving all reviews submitted by a user (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "0.3 Get Room Rating Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/room/{{room_id}}/stats",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "room", "{{room_id}}", "stats"]
            },
            "description": "**INPUT**: Room ID in URL path\n**PROCESS**: GET request calculates rating statistics\n**OUTPUT**: 200 OK with average rating and distribution\n\n**Screenshot Caption**: Figure 47: Room Rating Statistics - Average rating and rating distribution (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "0.4 Mark Review as Helpful",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id}}/helpful",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id}}", "helpful"]
            },
            "description": "**INPUT**: Review ID in URL + JWT token\n**PROCESS**: POST request increments helpful count\n**OUTPUT**: 200 OK with confirmation\n\n**Screenshot Caption**: Figure 48: Mark Review Helpful - Incrementing helpful count on review (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "0.5 Mark Review as Unhelpful",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id}}/unhelpful",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id}}", "unhelpful"]
            },
            "description": "**INPUT**: Review ID in URL + JWT token\n**PROCESS**: POST request increments unhelpful count\n**OUTPUT**: 200 OK with confirmation\n\n**Screenshot Caption**: Figure 49: Mark Review Unhelpful - Incrementing unhelpful count on review (Hassan Fouani)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "1. Review Management",
      "item": [
        {
          "name": "1.1 Submit Review (Success)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 201 Created', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "if (jsonData.review && jsonData.review.id) {",
                  "    pm.environment.set('review_id', jsonData.review.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": 1,\n  \"rating\": 5,\n  \"comment\": \"Excellent Bechtel conference room! Great equipment for EECE presentations. Highly recommend for FYP meetings.\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", ""]
            },
            "description": "**INPUT**: Room ID, rating (1-5), and comment in JSON body\n**PROCESS**: POST request creates review for room\n**OUTPUT**: 201 Created with review object\n\n**Screenshot Caption**: Figure 45: Submit Review API Trial - Rating and comment input, POST request with room ID, and created review returned (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.2 Submit Review (Invalid Rating - Too High)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": 1,\n  \"rating\": 6,\n  \"comment\": \"Rating 6 is out of bounds - should fail\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", ""]
            },
            "description": "**INPUT**: Rating value 6 (exceeds maximum of 5)\n**PROCESS**: POST request triggers rating validation\n**OUTPUT**: 400 Bad Request with validation error\n\n**Screenshot Caption**: Figure 46: Review Validation - Invalid rating (6) rejected with 400 error demonstrating input validation (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.3 Submit Review (Invalid Rating - Too Low)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": 1,\n  \"rating\": 0,\n  \"comment\": \"Rating 0 is below minimum - should fail\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", ""]
            },
            "description": "**INPUT**: Rating value 0 (below minimum of 1)\n**PROCESS**: POST request triggers rating validation\n**OUTPUT**: 400 Bad Request with validation error\n\n**Screenshot Caption**: Figure 47: Rating Below Minimum - Zero rating rejected showing validation bounds (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.4 Submit Second Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData.review && jsonData.review.id) {",
                  "    pm.environment.set('review_id_2', jsonData.review.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": 1,\n  \"rating\": 3,\n  \"comment\": \"Nicely study room was okay, but AC was too cold. Could use better temperature control.\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", ""]
            },
            "description": "**INPUT**: Different rating (3) and constructive comment\n**PROCESS**: POST request creates second review\n**OUTPUT**: 201 Created - used for testing average rating\n\n**Screenshot Caption**: Figure 48: Submit Second Review - Creating additional review for average rating calculation (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.5 Get Reviews for Room",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/room/1",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "room", "1"]
            },
            "description": "**INPUT**: Room ID in URL path + JWT token\n**PROCESS**: GET request retrieves all reviews for room\n**OUTPUT**: 200 OK with reviews list and average rating\n\n**Screenshot Caption**: Figure 49: Get Room Reviews API Trial - Room ID as parameter, GET request, and list of reviews with average rating returned (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.6 Get Review by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id}}",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id}}"]
            },
            "description": "**INPUT**: Review ID in URL + JWT token\n**PROCESS**: GET request retrieves specific review\n**OUTPUT**: 200 OK with review details\n\n**Screenshot Caption**: Figure 50: Get Review by ID - Retrieving specific review details (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "1.7 Update Review",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 4,\n  \"comment\": \"Nicely room was better after maintenance adjusted the AC. Updated my review.\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}"]
            },
            "description": "**INPUT**: Updated rating and comment in JSON body\n**PROCESS**: PUT request updates existing review\n**OUTPUT**: 200 OK with updated review\n\n**Screenshot Caption**: Figure 51: Update Review API Trial - Updated rating and comment input, PUT request with review ID, and modified review returned (Hassan Fouani)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. Moderation",
      "item": [
        {
          "name": "2.1 Flag Review for Moderation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Inappropriate language\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}/flag",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}", "flag"]
            },
            "description": "**INPUT**: Review ID in URL, flag reason in body\n**PROCESS**: POST request flags review for moderation\n**OUTPUT**: 200 OK with flagged review status\n\n**Screenshot Caption**: Figure 52: Flag Review for Moderation - Review ID and flag reason input, POST request, and flagged review confirmation (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "2.2 Get Flagged Reviews (Moderator)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/flagged",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "flagged"]
            },
            "description": "**INPUT**: Moderator/Admin JWT token\n**PROCESS**: GET request retrieves moderation queue\n**OUTPUT**: 200 OK with list of flagged reviews\n\n**Screenshot Caption**: Figure 53: Get Flagged Reviews API Trial - Moderator accessing moderation queue with list of flagged reviews returned (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "2.3 Moderate Review (Approve)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"approve\",\n  \"notes\": \"Review checked - content is appropriate\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}/moderate",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}", "moderate"]
            },
            "description": "**INPUT**: Moderation action (approve/reject/hide) and notes\n**PROCESS**: PUT request applies moderation decision\n**OUTPUT**: 200 OK with moderated review\n\n**Screenshot Caption**: Figure 54: Moderate Review - Approving flagged review with moderator notes (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "2.4 Unflag Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}/unflag",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}", "unflag"]
            },
            "description": "**INPUT**: Review ID in URL + Moderator JWT\n**PROCESS**: POST request removes flag from review\n**OUTPUT**: 200 OK with unflagged status\n\n**Screenshot Caption**: Figure 55: Unflag Review - Moderator approving flagged review, POST request to unflag endpoint, and review status updated (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "2.5 Flag Review Again (for Delete test)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Spam content\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}/flag",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}", "flag"]
            },
            "description": "Setup for demonstrating delete of flagged review"
          },
          "response": []
        },
        {
          "name": "2.6 Moderate Review (Reject/Hide)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"hide\",\n  \"notes\": \"Review hidden due to policy violation\"\n}"
            },
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}/moderate",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}", "moderate"]
            },
            "description": "**INPUT**: action=hide to hide the review\n**PROCESS**: PUT request hides review from public\n**OUTPUT**: 200 OK with hidden status\n\n**Screenshot Caption**: Figure 56: Hide Inappropriate Review - Moderator hiding review that violates policy (Hassan Fouani)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Delete Operations",
      "item": [
        {
          "name": "3.1 Delete Review",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/{{review_id_2}}",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "{{review_id_2}}"]
            },
            "description": "**INPUT**: Review ID in URL + JWT token (author or admin)\n**PROCESS**: DELETE request removes review\n**OUTPUT**: 200 OK with deletion confirmation\n\n**Screenshot Caption**: Figure 57: Delete Review API Trial - Review ID in URL, DELETE request, and deletion confirmation returned (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "3.2 Delete Review (Not Found)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/99999",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "99999"]
            },
            "description": "**INPUT**: Non-existent review ID\n**PROCESS**: DELETE request for missing review\n**OUTPUT**: 404 Not Found\n\n**Screenshot Caption**: Figure 58: Delete Non-existent Review - Returns 404 for missing review (Hassan Fouani)"
          },
          "response": []
        },
        {
          "name": "3.3 Get Room Reviews After Deletion",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:5004/api/reviews/room/1",
              "host": ["http://localhost:5004"],
              "path": ["api", "reviews", "room", "1"]
            },
            "description": "**INPUT**: Room ID to verify deletion\n**PROCESS**: GET request after delete\n**OUTPUT**: 200 OK with updated review count\n\n**Screenshot Caption**: Figure 59: Reviews After Deletion - Confirming review was removed from room (Hassan Fouani)"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "access_token",
      "value": ""
    },
    {
      "key": "review_id",
      "value": ""
    },
    {
      "key": "review_id_2",
      "value": ""
    },
    {
      "key": "room_id",
      "value": "1"
    },
    {
      "key": "user_id",
      "value": ""
    }
  ]
}
